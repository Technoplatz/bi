{
  "triggers": [
    {
      "name": "Amounts updater",
      "enabled": true,
      "operations": ["update", "insert"],
      "changes": [
        { "key": "dnn_qty", "op": "gte", "value": 0 },
        { "key": "dnn_unit_price", "op": "gte", "value": 0 }
      ],
      "conditions": [{ "key": "dnn_status", "op": "ne", "value": "70-Delivered" }],
      "targets": [
        {
          "collection": "ordino",
          "match": [
            { "key": "odi_no", "value": "dnn_odi_no" },
            { "key": "odi_sub_no", "value": "dnn_odi_sub_no" }
          ],
          "filter": [{ "key": "odi_status", "op": "eq", "value": "00-Open" }],
          "set": [{ "key": "odi_amount", "value": "sum(dnn_amount)" }],
          "upsert": false
        }
      ]
    }
  ]
}
