{
  "properties": {
    "aut_id": {
      "bsonType": "string",
      "minLength": 3,
      "maxLength": 64,
      "pattern": "^[a-z0-9-]{3,64}$",
      "title": "ID",
      "description": "Automation ID",
      "required": true,
      "width": 190
    },
    "aut_enabled": {
      "bsonType": "bool",
      "title": "Enabled",
      "description": "Enabled or not",
      "width": 110
    },
    "aut_source_collection_id": {
      "bsonType": "string",
      "minLength": 3,
      "maxLength": 64,
      "pattern": "^[a-z0-9-_]{3,64}$",
      "title": "Collection",
      "description": "Collection ID",
      "required": true,
      "collection": true,
      "width": 180
    },
    "aut_source_filter": {
      "bsonType": "array",
      "minItems": 0,
      "maxItems": 16,
      "uniqueItems": true,
      "additionalProperties": false,
      "filter": true,
      "items": {
        "bsonType": "object",
        "additionalProperties": false,
        "properties": {
          "key": {
            "bsonType": "string",
            "minLength": 1,
            "maxLength": 64,
            "pattern": "^[a-z_]{1,64}$",
            "title": "key",
            "description": "Key"
          },
          "op": {
            "bsonType": "string",
            "minLength": 1,
            "maxLength": 8,
            "pattern": "^[a-z]{1,8}$",
            "enum": ["eq", "ne", "contains", "nc", "in", "nin", "gt", "gte", "lt", "lte", "null", "nnull", "true", "false"],
            "title": "op",
            "description": "Operator"
          },
          "value": {
            "bsonType": "string",
            "minLength": 0,
            "maxLength": 64,
            "title": "value",
            "description": "Value"
          }
        },
        "required": ["key", "op"]
      },
      "title": "Source Filter",
      "description": "Source Filter",
      "subType": "filter",
      "width": 140
    },
    "aut_source_set": {
      "bsonType": "array",
      "minItems": 0,
      "maxItems": 16,
      "uniqueItems": true,
      "additionalProperties": false,
      "items": {
        "bsonType": "object",
        "additionalProperties": false,
        "properties": {
          "key": {
            "bsonType": "string",
            "minLength": 1,
            "maxLength": 64,
            "pattern": "^[a-z_]{1,64}$",
            "title": "Key",
            "description": "Field"
          },
          "value": {
            "bsonType": "string",
            "minLength": 0,
            "maxLength": 64,
            "title": "Value",
            "description": "Set Value"
          }
        },
        "required": ["key", "value"]
      },
      "title": "Source Set",
      "description": "Source Set",
      "subType": "keyvalue",
      "width": 130
    },
    "aut_target": {
      "bsonType": "bool",
      "title": "Target",
      "description": "Target?",
      "width": 120
    },
    "aut_target_collection_id": {
      "bsonType": "string",
      "minLength": 3,
      "maxLength": 64,
      "pattern": "^[a-z0-9-_]{3,64}$",
      "title": "Target Collection",
      "description": "Target Collection ID",
      "required": true,
      "collection": true,
      "width": 190
    },
    "aut_target_match": {
      "bsonType": "array",
      "minItems": 0,
      "maxItems": 16,
      "uniqueItems": true,
      "additionalProperties": false,
      "items": {
        "bsonType": "object",
        "additionalProperties": false,
        "properties": {
          "key": {
            "bsonType": "string",
            "minLength": 1,
            "maxLength": 64,
            "pattern": "^[a-z_]{1,64}$",
            "title": "Field",
            "description": "Field"
          },
          "value": {
            "bsonType": "string",
            "minLength": 1,
            "maxLength": 64,
            "title": "Value",
            "description": "Value"
          }
        },
        "required": ["key", "value"]
      },
      "title": "Target Match",
      "description": "Target Match",
      "subType": "keyvalue",
      "width": 160
    },
    "aut_target_set": {
      "bsonType": "array",
      "minItems": 0,
      "maxItems": 16,
      "uniqueItems": true,
      "additionalProperties": false,
      "items": {
        "bsonType": "object",
        "additionalProperties": false,
        "properties": {
          "key": {
            "bsonType": "string",
            "minLength": 1,
            "maxLength": 64,
            "pattern": "^[a-z_]{1,64}$",
            "title": "Field",
            "description": "Field"
          },
          "value": {
            "bsonType": "string",
            "minLength": 0,
            "maxLength": 64,
            "title": "Value",
            "description": "Value"
          }
        },
        "required": ["key"]
      },
      "title": "Target Set",
      "description": "Target Set",
      "subType": "keyvalue",
      "width": 140
    },
    "aut_target_upsert": {
      "bsonType": "bool",
      "title": "Upsert?",
      "description": "Upsert?",
      "width": 140
    }
  },
  "required": ["aut_id", "aut_source_collection_id"],
  "unique": [["aut_id"]],
  "index": [["aut_source_collection_id"], ["aut_source_collection_id", "aut_enabled"]],
  "sort": {
    "_modified_at": -1
  }
}
