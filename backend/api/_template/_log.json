{
  "properties": {
    "log_type": {
      "bsonType": "string",
      "minLength": 1,
      "maxLength": 16,
      "title": "Type",
      "description": "Log type",
      "enum": ["Info", "Error", "Warning", "Denied", "Announcement", "Automation"],
      "pattern": "^[a-zA-Z]{1,16}$",
      "required": true
    },
    "log_date": {
      "bsonType": "date",
      "title": "Date",
      "description": "Log date",
      "required": true
    },
    "log_user_id": {
      "bsonType": "string",
      "minLength": 1,
      "maxLength": 64,
      "title": "User",
      "description": "User id",
      "required": true
    },
    "log_ip": {
      "bsonType": "string",
      "minLength": 1,
      "maxLength": 16,
      "title": "IP",
      "description": "IP address"
    },
    "log_collection_id": {
      "bsonType": "string",
      "minLength": 3,
      "maxLength": 64,
      "pattern": "^[a-z0-9-_]{3,64}$",
      "title": "Collection",
      "description": "Collection ID",
      "permanent": true
    },
    "log_operation": {
      "bsonType": "string",
      "minLength": 1,
      "maxLength": 64,
      "title": "Operation",
      "description": "Operation",
      "required": true
    },
    "log_document": {
      "bsonType": "string",
      "title": "Document",
      "description": "Document",
      "textarea": true,
      "minLength": 0,
      "maxLength": 2048
    }
  },
  "required": ["log_type", "log_date", "log_user_id", "log_operation"],
  "sort": {
    "_created_at": -1
  },
  "index": [["log_operation"], ["log_collection_id"], ["log_type", "log_date"]]
}
