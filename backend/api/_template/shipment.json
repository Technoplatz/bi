{
  "properties": {
    "shp_date": {
      "bsonType": "date",
      "title": "Date",
      "description": "Shipment Date",
      "dateonly": false,
      "width": 120
    },
    "shp_id": {
      "bsonType": "number",
      "title": "ID",
      "description": "Shipment ID",
      "placeholder": "Shipment ID",
      "minimum": 0,
      "maximum": 999999,
      "counter": true,
      "permanent": true,
      "width": 90
    },
    "shp_acc_no": {
      "bsonType": "string",
      "title": "Account No",
      "description": "Account No",
      "minLength": 10,
      "maxLength": 11,
      "pattern": "^[A-Z0-9-]{10,11}$",
      "width": 110
    },
    "shp_carrier_name": {
      "bsonType": "string",
      "title": "Carrier",
      "description": "Carrier name or driver name surname",
      "placeholder": "Carrier or Driver Name",
      "minLength": 2,
      "maxLength": 32,
      "width": 180
    },
    "shp_carrier_id": {
      "bsonType": "string",
      "title": "Carrier Tax",
      "description": "Carrier tax no or driver id",
      "placeholder": "Carrier Tax/Id No",
      "minLength": 10,
      "maxLength": 12,
      "pattern": "^[0-9]{10,12}$",
      "width": 140
    },
    "shp_vehicle_id": {
      "bsonType": "string",
      "title": "vehicle Id",
      "description": "Vehicle plate number",
      "placeholder": "Vehicle Plate",
      "minLength": 6,
      "maxLength": 16,
      "pattern": "^[A-Za-z0-9 ]{6,16}$",
      "width": 140
    },
    "shp_status": {
      "bsonType": "string",
      "title": "Status",
      "description": "Status",
      "minLength": 5,
      "maxLength": 16,
      "pattern": "^[A-Za-z0-9-]{5,16}$",
      "enum": ["00-Open", "10-InProgress", "20-OK", "99-Error"],
      "default": "00-Open",
      "readonly": true,
      "width": 100
    },
    "shp_ewaybill_no": {
      "bsonType": "string",
      "title": "EWaybill No",
      "description": "Waybill serial number",
      "placeholder": "Waybill No",
      "pattern": "^[A-Z0-9]{16,16}$",
      "minLength": 16,
      "maxLength": 16,
      "readonly": false,
      "width": 140
    },
    "shp_ewaybill_date": {
      "bsonType": "date",
      "title": "EWaybill Date",
      "description": "Ewaybill generated date",
      "readonly": false,
      "width": 150
    },
    "shp_ettn": {
      "bsonType": "string",
      "title": "EWaybill ETTN",
      "description": "EWaybill ETTN",
      "placeholder": "ETTN",
      "pattern": "^[a-z0-9-]{32,40}$",
      "minLength": 32,
      "maxLength": 40,
      "readonly": false,
      "width": 270
    },
    "shp_notes": {
      "bsonType": "string",
      "title": "Notes",
      "description": "Shipment notes to carrier or customer",
      "placeholder": "Shipment Notes",
      "minLength": 0,
      "maxLength": 512,
      "width": 200
    }
  },
  "sort": {
    "_modified_at": -1
  },
  "required": ["shp_id", "shp_acc_no", "shp_carrier_name", "shp_carrier_id", "shp_date", "shp_vehicle_id"],
  "index": [["shp_id"], ["shp_acc_no"]],
  "unique": [["shp_id"], ["shp_ewaybill_no"]],
  "parents": [
    {
      "collection": "account",
      "match": [
        {
          "key": "shp_acc_no",
          "value": "acc_no"
        }
      ],
      "filter": [
        {
          "key": "acc_is_active",
          "op": "eq",
          "value": true
        }
      ],
      "get": ["acc_no", "acc_name"]
    }
  ],
  "links": [
    {
      "collection": "delivery",
      "get": "dnn_no",
      "set": [
        {
          "key": "dnn_waybill_no",
          "value": "shp_waybill_no"
        },
        {
          "key": "dnn_waybill_date",
          "value": "shp_date"
        }
      ]
    }
  ],
  "actions": [],
  "triggers": [],
  "views": {},
  "connectors": []
}
