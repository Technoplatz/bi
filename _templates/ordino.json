{
  "properties": {
    "odi_no": {
      "bsonType": "string",
      "title": "Ordino No",
      "description": "Primary ordino number",
      "pattern": "^[0-9A-Z-_./ ]{1,20}$",
      "minLength": 1,
      "maxLength": 20,
      "width": 170
    },
    "odi_sub_no": {
      "bsonType": "string",
      "title": "Ordino Sub No",
      "description": "Secondary ordino number",
      "pattern": "^[0-9A-Z-_/ ]{1,20}$",
      "minLength": 1,
      "maxLength": 20
    },
    "odi_date": {
      "bsonType": "date",
      "title": "Ordino Date",
      "description": "Ordino Opening Date",
      "width": 120
    },
    "odi_from": {
      "bsonType": "string",
      "title": "Shipped From",
      "description": "Country where the goods are loaded",
      "enum": ["China", "Hungary", "Germany", "USA", "Netherlands", "UK"],
      "width": 110
    },
    "odi_customs": {
      "bsonType": "string",
      "title": "Customs",
      "description": "Customs Location",
      "enum": ["AHL", "Halkalı", "Ambarlı"],
      "width": 110
    },
    "odi_ship_type": {
      "bsonType": "string",
      "title": "Ship Type",
      "description": "Shipping Type",
      "enum": ["Sea", "Air", "Truck"],
      "dateonly": true,
      "width": 120
    },
    "odi_eta_date": {
      "bsonType": "date",
      "title": "ETA Date",
      "description": "Estimated Date of Arrival",
      "dateonly": true,
      "width": 120
    },
    "odi_amount": {
      "bsonType": "number",
      "title": "Amount",
      "description": "Ordino Amount",
      "default": 0,
      "width": 110
    },
    "odi_arrived": {
      "bsonType": "bool",
      "title": "Arrived",
      "description": "Ordino Arrival Date",
      "default": false,
      "truetext": "Arrived",
      "falsetext": "OnTheWay",
      "width": 100
    },
    "odi_arrived_date": {
      "bsonType": "date",
      "title": "Arrived Date",
      "description": "Date of Arrival",
      "dateonly": true,
      "width": 140
    },
    "odi_transfer_date": {
      "bsonType": "date",
      "title": "Trasfer Date",
      "description": "Transfer Date",
      "width": 150
    },
    "odi_completed": {
      "bsonType": "bool",
      "title": "Completed",
      "description": "Customs Clearance Completed",
      "width": 130,
      "truetext": "Completed",
      "falsetext": "InProgress",
      "default": false
    }
  },
  "required": ["odi_no", "odi_sub_no", "odi_date", "odi_from", "odi_ship_type", "odi_customs"],
  "index": [["odi_no"], ["odi_no", "odi_sub_no"], ["odi_from"], ["odi_ship_type"], ["odi_customs", "odi_completed"]],
  "unique": [["odi_no", "odi_sub_no"]],
  "sort": {
    "_modified_at": -1
  },
  "parents": [],
  "links": [
    {
      "collection": "delivery",
      "get": "dnn_no",
      "match": [
        {
          "key": "dnn_status",
          "op": "eq",
          "value": "00-Open"
        }
      ],
      "set": [
        {
          "key": "dnn_odi_no",
          "value": "odi_no"
        },
        {
          "key": "dnn_odi_sub_no",
          "value": "odi_sub_no"
        },
        {
          "key": "dnn_status",
          "value": "10-OnTheWay"
        }
      ],
      "autofill": true,
      "btntext": "Add DNs",
      "_tags": ["#Managers", "#Technoplatz", "#Operation"],
      "notification": {
        "notify": true,
        "subject": "DNs Linked to Ordino",
        "body": "Hi,<br /><br />We would like to let you know that attached DNs has been linked to an Ordino.",
        "attachment": true,
        "fields": "dnn_odi_no,dnn_odi_sub_no,dnn_no,dnn_line_no,dnn_status,dnn_bill_no,dnn_acc_no,dnn_acc_name,dnn_prd_no,dnn_prd_description,dnn_qty"
      }
    }
  ],
  "actions": [
    {
      "id": "act-ordino-arrived",
      "title": "Arrived (On Customs)",
      "enabled": true,
      "match": [
        {
          "key": "odi_arrived",
          "op": "eq",
          "value": false
        }
      ],
      "set": [
        {
          "key": "odi_arrived",
          "value": true
        },
        {
          "key": "odi_arrived_date",
          "value": null
        }
      ],
      "one_click": false,
      "_tags": ["#Managers", "#Technoplatz", "#Operation"],
      "notification": {
        "notify": false,
        "subject": "Ordino is on customs",
        "body": "Hi,<br /><br />We would like to let you know that status of the attached ordinos has been arrived.",
        "fields": "odi_no,odi_sub_no,odi_ship_type",
        "attachment": true,
        "filter": [
          {
            "key": "odi_arrived",
            "op": "eq",
            "value": true
          },
          {
            "key": "odi_completed",
            "op": "null",
            "value": null
          }
        ]
      }
    },
    {
      "id": "act-ordino-arrived-cancel",
      "title": "Arrived Cancel",
      "enabled": true,
      "match": [
        {
          "key": "odi_arrived",
          "op": "eq",
          "value": true
        }
      ],
      "set": [
        {
          "key": "odi_arrived",
          "value": false
        },
        {
          "key": "odi_arrived_date",
          "value": null
        }
      ],
      "one_click": false,
      "_tags": ["#Managers", "#Technoplatz", "#Operation"],
      "notification": {
        "notify": false,
        "subject": "Ordino arrival canceled",
        "body": "Hi,<br /><br />We would like to let you know that status of the attached ordinos has been rolled back.",
        "fields": "odi_no,odi_sub_no,odi_ship_type",
        "filter": [
          {
            "key": "odi_arrived",
            "op": "eq",
            "value": false
          }
        ]
      }
    }
  ],
  "triggers": [
    {
      "name": "Ordino Arrived",
      "enabled": true,
      "operations": ["update", "insert"],
      "changes": [
        {
          "key": "odi_arrived",
          "op": "eq",
          "value": true
        }
      ],
      "conditions": [
        {
          "key": "odi_arrived",
          "op": "eq",
          "value": false
        }
      ],
      "targets": [
        {
          "collection": "delivery",
          "match": [
            {
              "key": "dnn_odi_no",
              "value": "odi_no"
            },
            {
              "key": "dnn_odi_sub_no",
              "value": "odi_sub_no"
            }
          ],
          "filter": [
            {
              "key": "dnn_status",
              "op": "in",
              "value": "10-OnTheWay,20-OnCustoms"
            }
          ],
          "set": [
            {
              "key": "dnn_status",
              "value": "20-OnCustoms"
            }
          ],
          "upsert": false
        }
      ]
    },
    {
      "name": "Ordino Arrived Cancel",
      "enabled": true,
      "operations": ["update", "insert"],
      "changes": [
        {
          "key": "odi_arrived",
          "op": "eq",
          "value": false
        }
      ],
      "conditions": [
        {
          "key": "odi_arrived",
          "op": "eq",
          "value": true
        }
      ],
      "targets": [
        {
          "collection": "delivery",
          "match": [
            {
              "key": "dnn_odi_no",
              "value": "odi_no"
            },
            {
              "key": "dnn_odi_sub_no",
              "value": "odi_sub_no"
            }
          ],
          "filter": [
            {
              "key": "dnn_status",
              "op": "in",
              "value": "10-OnTheWay,20-OnCustoms"
            }
          ],
          "set": [
            {
              "key": "dnn_status",
              "value": "10-OnTheWay"
            }
          ],
          "upsert": false
        }
      ]
    }
  ],
  "views": {
    "customs-halkali": {
      "title": "Halkalı Ordinos",
      "description": "Ordinos from Halkalı customs",
      "priority": 1000,
      "enabled": true,
      "dashboard": true,
      "data_filter": [
        {
          "key": "odi_customs",
          "op": "eq",
          "value": "Halkalı"
        },
        {
          "key": "odi_completed",
          "op": "eq",
          "value": false
        }
      ],
      "data_sort": {
        "_modified_at": -1
      },
      "data_excluded": [],
      "data_index": ["odi_from"],
      "data_columns": ["odi_ship_type"],
      "data_values": [
        {
          "key": "odi_no",
          "value": "count"
        }
      ],
      "data_json": true,
      "data_excel": true,
      "data_csv": true,
      "pivot": true,
      "pivot_totals": true,
      "chart": true,
      "flashcard": true,
      "chart_type": "Flashcard",
      "chart_label": true,
      "chart_gradient": true,
      "chart_grid": true,
      "chart_legend": false,
      "chart_xaxis": true,
      "chart_xaxis_label": false,
      "chart_yaxis": true,
      "chart_yaxis_label": false,
      "chart_colors": ["#e60049", "#0bb4ff", "#50e991", "#e6d800", "#9b19f5", "#ffa300", "#dc0ab4", "#b3d4ff", "#00bfa0"],
      "scheduled": false,
      "scheduled_cron": "* 4 * * *",
      "scheduled_tz": "Europe/Berlin",
      "_tags": ["#Technoplatz", "#Managers"]
    },
    "customs-ambarli": {
      "title": "Ambarlı Ordinos",
      "description": "Ordinos from Ambarlı customs",
      "priority": 1000,
      "enabled": true,
      "dashboard": true,
      "data_filter": [
        {
          "key": "odi_customs",
          "op": "eq",
          "value": "Ambarlı"
        },
        {
          "key": "odi_completed",
          "op": "eq",
          "value": false
        }
      ],
      "data_sort": {
        "_modified_at": -1
      },
      "data_excluded": [],
      "data_index": ["odi_from"],
      "data_columns": ["odi_ship_type"],
      "data_values": [
        {
          "key": "odi_no",
          "value": "count"
        }
      ],
      "data_json": true,
      "data_excel": true,
      "data_csv": true,
      "pivot": true,
      "pivot_totals": true,
      "chart": true,
      "flashcard": true,
      "chart_type": "Flashcard",
      "chart_label": true,
      "chart_gradient": true,
      "chart_grid": true,
      "chart_legend": false,
      "chart_xaxis": true,
      "chart_xaxis_label": false,
      "chart_yaxis": true,
      "chart_yaxis_label": false,
      "chart_colors": ["#e60049", "#0bb4ff", "#50e991", "#e6d800", "#9b19f5", "#ffa300", "#dc0ab4", "#b3d4ff", "#00bfa0"],
      "scheduled": false,
      "scheduled_cron": "* 4 * * *",
      "scheduled_tz": "Europe/Berlin",
      "_tags": ["#Managers", "#Administrators"]
    },
    "customs-ahl": {
      "title": "AHL Ordinos",
      "description": "Ordinos from AHL customs",
      "priority": 1000,
      "enabled": true,
      "dashboard": true,
      "data_filter": [
        {
          "key": "odi_customs",
          "op": "eq",
          "value": "AHL"
        },
        {
          "key": "odi_completed",
          "op": "eq",
          "value": false
        }
      ],
      "data_sort": {
        "_modified_at": -1
      },
      "data_excluded": [],
      "data_index": ["odi_from"],
      "data_columns": ["odi_ship_type"],
      "data_values": [
        {
          "key": "odi_no",
          "value": "count"
        }
      ],
      "data_json": true,
      "data_excel": true,
      "data_csv": true,
      "pivot": true,
      "pivot_totals": true,
      "chart": true,
      "flashcard": true,
      "chart_type": "Flashcard",
      "chart_label": true,
      "chart_gradient": true,
      "chart_grid": true,
      "chart_legend": false,
      "chart_xaxis": true,
      "chart_xaxis_label": false,
      "chart_yaxis": true,
      "chart_yaxis_label": false,
      "chart_colors": ["#e60049", "#0bb4ff", "#50e991", "#e6d800", "#9b19f5", "#ffa300", "#dc0ab4", "#b3d4ff", "#00bfa0"],
      "scheduled": false,
      "scheduled_cron": "* 4 * * *",
      "scheduled_tz": "Europe/Berlin",
      "_tags": ["#Managers", "#Technoplatz", "#Administrators"]
    }
  },
  "fetchers": []
}
