{
  "properties": {
    "ser_no": {
      "bsonType": "string",
      "title": "Serial No",
      "description": "Serial Number",
      "minLength": 4,
      "maxLength": 16,
      "pattern": "^[A-Za-z0-9-]{4,16}$",
      "casetype": "uppercase",
      "width": 110
    },
    "ser_dnn_no": {
      "bsonType": "string",
      "title": "DN No",
      "description": "Delivery Number",
      "minLength": 10,
      "maxLength": 16,
      "pattern": "^[0-9-]{10,16}$",
      "width": 110
    },
    "ser_line_no": {
      "bsonType": "string",
      "title": "Line",
      "description": "Line Number",
      "minLength": 1,
      "maxLength": 4,
      "pattern": "^[0-9]{1,4}$",
      "width": 110
    },
    "ser_prd_no": {
      "bsonType": "string",
      "title": "Product ID",
      "description": "Product ID",
      "minLength": 7,
      "maxLength": 16,
      "pattern": "^[A-Z0-9-]{7,16}$",
      "replacement": [
        {
          "find": "-",
          "replace": ""
        },
        {
          "find": "_",
          "replace": ""
        }
      ],
      "casetype": "uppercase",
      "width": 130
    },
    "ser_case_no": {
      "bsonType": "string",
      "title": "Case No",
      "description": "Case Number",
      "minLength": 18,
      "maxLength": 18,
      "pattern": "^[0-9-]{18,18}$",
      "width": 150
    },
    "ser_proc_in": {
      "bsonType": "bool",
      "title": "Income",
      "description": "Depot Income",
      "default": false,
      "width": 110
    },
    "ser_proc_out": {
      "bsonType": "bool",
      "title": "Outgoing",
      "description": "Depot Out",
      "default": false,
      "width": 120
    },
    "ser_proc_in_date": {
      "bsonType": "date",
      "title": "In Date",
      "description": "Depot Income Date",
      "width": 140
    },
    "ser_proc_out_date": {
      "bsonType": "date",
      "title": "In Date",
      "description": "Depot Outgoing Date",
      "width": 150
    }
  },
  "required": ["ser_dnn_no", "ser_line_no", "ser_prd_no", "ser_case_no"],
  "index": [["ser_dnn_no"], ["ser_case_no"]],
  "unique": [["ser_no"]],
  "sort": {
    "_modified_at": -1
  },
  "parents": [],
  "links": [],
  "actions": [
    {
      "id": "act-assign-dn-und-spc",
      "title": "DN Update",
      "enabled": true,
      "match": [
        {
          "key": "ser_proc_in",
          "op": "eq",
          "value": false
        }
      ],
      "set": [
        {
          "key": "ser_dnn_no",
          "value": null
        },
        {
          "key": "ser_prd_no",
          "value": null
        }
      ],
      "one_click": false,
      "_tags": ["#Managers", "#Technoplatz", "#Operation"],
      "notification": {
        "notify": false,
        "subject": "Serials DN updated",
        "body": "Hi,<br /><br />We would like to let you know that dn info was updated.",
        "fields": "ser_no,ser_dnn_no,ser_prd_no,ser_case_no",
        "attachment": false,
        "filter": [
          {
            "key": "ser_proc_in",
            "op": "eq",
            "value": false
          }
        ]
      }
    }
  ],
  "triggers": [
    {
      "name": "Barcode Readin",
      "enabled": true,
      "operations": ["insert", "update"],
      "changes": [
        {
          "key": "ser_proc_in",
          "op": "eq",
          "value": true
        }
      ],
      "targets": [
        {
          "collection": "delivery",
          "match": [
            {
              "key": "dnn_no",
              "value": "ser_dnn_no"
            },
            {
              "key": "dnn_line_no",
              "value": "ser_line_no"
            }
          ],
          "filter": [
            {
              "key": "dnn_status",
              "op": "in",
              "value": "40-ClearanceCompleted,50-OnTheTouchpoint"
            }
          ],
          "set": [
            {
              "key": "dnn_status",
              "value": "50-OnTheTouchpoint"
            }
          ],
          "upsert": false
        }
      ]
    },
    {
      "name": "Barcode Readin Cancel",
      "enabled": true,
      "operations": ["insert", "update"],
      "changes": [
        {
          "key": "ser_proc_in",
          "op": "eq",
          "value": false
        }
      ],
      "targets": [
        {
          "collection": "delivery",
          "match": [
            {
              "key": "dnn_no",
              "value": "ser_dnn_no"
            },
            {
              "key": "dnn_line_no",
              "value": "ser_line_no"
            }
          ],
          "filter": [
            {
              "key": "dnn_status",
              "op": "eq",
              "value": "50-OnTheTouchpoint"
            }
          ],
          "set": [
            {
              "key": "dnn_status",
              "value": "40-ClearanceCompleted"
            }
          ],
          "upsert": false
        }
      ]
    }
  ],
  "views": {},
  "fetchers": []
}
