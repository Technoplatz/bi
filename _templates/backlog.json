{
  "properties": {
    "blo_order_no": {
      "bsonType": "string",
      "title": "Order No",
      "description": "Order Number",
      "minLength": 10,
      "maxLength": 10,
      "pattern": "^[0-9]{10,10}$",
      "width": 130
    },
    "blo_line_no": {
      "bsonType": "string",
      "title": "Line",
      "description": "Line Number",
      "minLength": 1,
      "maxLength": 4,
      "pattern": "^[0-9]{1,4}$",
      "width": 110
    },
    "blo_order_date": {
      "bsonType": "date",
      "title": "Order Date",
      "description": "Order Date",
      "width": 130
    },
    "blo_acc_no": {
      "bsonType": "string",
      "title": "Account No",
      "description": "Account No",
      "minLength": 10,
      "maxLength": 11,
      "pattern": "^[0-9-]{10,11}$",
      "width": 110
    },
    "blo_acc_name": {
      "bsonType": "string",
      "title": "Account Name",
      "description": "Account Name",
      "minLength": 1,
      "maxLength": 64,
      "width": 140
    },
    "blo_po_id": {
      "bsonType": "string",
      "title": "Po ID",
      "description": "Purchase Order No",
      "minLength": 1,
      "maxLength": 64,
      "width": 260
    },
    "blo_bu_id": {
      "bsonType": "number",
      "title": "BU ID",
      "description": "Business Unit Id",
      "width": 100
    },
    "blo_prd_no": {
      "bsonType": "string",
      "title": "Product ID",
      "description": "Product ID",
      "minLength": 7,
      "maxLength": 16,
      "pattern": "^[A-Z0-9-]{7,16}$",
      "replacement": [
        {
          "find": "-",
          "replace": ""
        },
        {
          "find": "_",
          "replace": ""
        }
      ],
      "width": 130
    },
    "blo_prd_description": {
      "bsonType": "string",
      "title": "Description",
      "description": "Product Description",
      "minLength": 1,
      "maxLength": 256,
      "width": 280
    },
    "blo_prd_group": {
      "bsonType": "string",
      "title": "Group",
      "description": "Product Group",
      "minLength": 0,
      "maxLength": 64,
      "width": 130
    },
    "blo_prd_family": {
      "bsonType": "string",
      "title": "Family",
      "description": "Product Family",
      "minLength": 0,
      "maxLength": 64,
      "width": 160
    },
    "blo_ship_type": {
      "bsonType": "string",
      "title": "Ship Type",
      "description": "Shipping Type",
      "enum": ["Sea", "Air", "Truck", "Railway"],
      "width": 120
    },
    "blo_order_qty": {
      "bsonType": "number",
      "title": "Order Qty",
      "description": "Order Quantity",
      "default": 1,
      "width": 130
    },
    "blo_volume_qty": {
      "bsonType": "number",
      "title": "Volume Qty",
      "description": "Volume Quantity",
      "default": 1,
      "width": 130
    },
    "blo_unit_price": {
      "bsonType": "number",
      "title": "Unit Price",
      "description": "Unit Price",
      "default": 0,
      "width": 160
    },
    "blo_amount": {
      "bsonType": "number",
      "title": "Amount",
      "description": "Amount",
      "default": 0,
      "disabled": false,
      "width": 180
    },
    "blo_eta_date": {
      "bsonType": "date",
      "title": "ETA Date",
      "description": "Backlog ETA Date",
      "width": 120
    }
  },
  "required": ["blo_acc_no", "blo_prd_no"],
  "index": [["blo_acc_no"], ["blo_prd_no"], ["blo_acc_no"]],
  "unique": [["blo_order_no", "blo_line_no"]],
  "sort": {
    "_modified_at": -1
  },
  "parents": [
    {
      "collection": "account",
      "match": [
        {
          "key": "blo_acc_no",
          "value": "acc_no"
        }
      ],
      "filter": [
        {
          "key": "acc_is_active",
          "op": "eq",
          "value": true
        }
      ],
      "get": ["acc_no", "acc_name"]
    }
  ],
  "actions": [],
  "triggers": [
    {
      "name": "Order creator",
      "enabled": true,
      "operations": ["update", "insert"],
      "changes": [
        {
          "key": "blo_unit_price",
          "op": "gte",
          "value": 0
        }
      ],
      "targets": [
        {
          "collection": "order",
          "match": [
            {
              "key": "ord_no",
              "value": "blo_order_no"
            },
            {
              "key": "ord_prd_no",
              "value": "blo_prd_no"
            }
          ],
          "filter": [],
          "set": [
            {
              "key": "ord_no",
              "value": "blo_order_no"
            },
            {
              "key": "ord_order_date",
              "value": "blo_order_date"
            },
            {
              "key": "ord_prd_no",
              "value": "blo_prd_no"
            },
            {
              "key": "ord_unit_price",
              "value": "blo_unit_price"
            }
          ],
          "upsert": true
        }
      ]
    }
  ],
  "views": {},
  "links": [],
  "connectors": []
}
