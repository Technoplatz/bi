{
  "properties": {
    "inv_dnn_no": {
      "bsonType": "string",
      "title": "DN No",
      "description": "Delivery Number",
      "minLength": 10,
      "maxLength": 16,
      "pattern": "^[0-9-]{10,16}$",
      "width": 110
    },
    "inv_no": {
      "bsonType": "string",
      "title": "Invoice No",
      "description": "Invoice No",
      "minLength": 10,
      "maxLength": 10,
      "pattern": "^[0-9]{10,10}$",
      "width": 130
    },
    "inv_date": {
      "bsonType": "date",
      "title": "Invoice Date",
      "description": "Invoice Date",
      "width": 120
    }
  },
  "required": ["inv_dnn_no", "inv_no", "inv_date"],
  "index": [["inv_dnn_no"], ["inv_no"]],
  "unique": [["inv_dnn_no", "inv_no"]],
  "sort": {
    "_modified_at": -1
  },
  "parents": [],
  "links": [],
  "actions": [],
  "triggers": [
    {
      "name": "Delivery updater",
      "enabled": true,
      "operations": ["update", "insert"],
      "changes": [
        {
          "key": "inv_no",
          "op": "nnull",
          "value": null
        }
      ],
      "targets": [
        {
          "collection": "delivery",
          "match": [
            {
              "key": "dnn_no",
              "value": "inv_dnn_no"
            }
          ],
          "filter": [],
          "set": [
            {
              "key": "dnn_invoice_no",
              "value": "inv_no"
            },
            {
              "key": "dnn_invoice_date",
              "value": "inv_date"
            }
          ],
          "upsert": false
        }
      ]
    }
  ],
  "views": {},
  "connectors": []
}
