{
  "properties": {
    "inv_dnn_no": {
      "bsonType": "string",
      "title": "DN No",
      "description": "Delivery Number",
      "minLength": 10,
      "maxLength": 16,
      "pattern": "^[0-9-]{10,16}$",
      "width": 110
    },
    "inv_no": {
      "bsonType": "string",
      "title": "Invoice No",
      "description": "Invoice No",
      "minLength": 10,
      "maxLength": 10,
      "pattern": "^[0-9]{10,10}$",
      "width": 130
    },
    "inv_date": {
      "bsonType": "date",
      "title": "Invoice Date",
      "description": "Invoice Date",
      "width": 120
    }
  },
  "required": ["inv_dnn_no", "inv_no", "inv_date"],
  "index": [["inv_dnn_no"], ["inv_no"]],
  "unique": [["inv_dnn_no", "inv_no"]],
  "sort": {
    "_modified_at": -1
  },
  "parents": [],
  "links": [],
  "actions": [],
  "triggers": [
    {
      "name": "Delivery updater",
      "enabled": true,
      "operations": ["update", "insert"],
      "changes": [
        {
          "key": "inv_no",
          "op": "nnull",
          "value": null
        }
      ],
      "targets": [
        {
          "collection": "delivery",
          "match": [
            {
              "key": "dnn_no",
              "value": "inv_dnn_no"
            }
          ],
          "filter": [],
          "set": [
            {
              "key": "dnn_invoice_no",
              "value": "inv_no"
            },
            {
              "key": "dnn_invoice_date",
              "value": "inv_date"
            }
          ],
          "upsert": false
        }
      ]
    }
  ],
  "views": {
    "all-invoices": {
      "title": "All Invoices",
      "description": "All Invoices Description",
      "priority": 9999,
      "enabled": true,
      "dashboard": false,
      "data_filter": [],
      "data_sort": {
        "_modified_at": -1
      },
      "data_excluded": [],
      "data_index": [],
      "data_columns": [],
      "data_values": [],
      "data_json": true,
      "data_excel": true,
      "data_csv": true,
      "pivot": true,
      "pivot_totals": true,
      "chart": true,
      "flashcard": false,
      "chart_type": "Stacked Vertical Bar",
      "chart_label": true,
      "chart_gradient": true,
      "chart_grid": true,
      "chart_legend": false,
      "chart_xaxis": true,
      "chart_xaxis_label": false,
      "chart_yaxis": true,
      "chart_yaxis_label": false,
      "chart_colors": [],
      "scheduled": false,
      "scheduled_cron": "15 14,15,16 * * mon,tue",
      "scheduled_tz": "Europe/Berlin",
      "_tags": ["#Managers", "#Administrators"]
    }
  },
  "fetchers": []
}
